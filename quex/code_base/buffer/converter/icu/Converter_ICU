/* -*- C++ -*- vim: set syntax=cpp: 
 * (C) 2009 Frank-Rene Schaefer
 * NO WARRANTY */
#ifndef __INCLUDE_GUARD__QUEX_BUFFER_CONVERTER_ICU__
#define __INCLUDE_GUARD__QUEX_BUFFER_CONVERTER_ICU__

#if ! defined(QUEX_OPTION_ENABLE_ICU)
#    error "This header has been included without setting the compile option QUEX_OPTION_ENABLE_ICU. This could cause problems on systems where the correspondent headers are not installed. Make the inclusion of this header dependent on the above compile option."
#endif

#include <quex/code_base/buffer/converter/Converter>

#if ! defined (__QUEX_SETTING_PLAIN_C)
    extern "C" { 
#endif
#   include <stdio.h>
#   include <assert.h>
#   include <string.h>
#   include "unicode/utypes.h"   /* Basic ICU data types */
#   include "unicode/ucnv.h"     /* C   Converter API    */
#   include "unicode/ustring.h"  /* some more string fcns*/
#   include "unicode/uchar.h"    /* char names           */
#   include "unicode/uloc.h"
#   include "unicode/unistr.h"
#if ! defined (__QUEX_SETTING_PLAIN_C)
    } // extern "C" { 
#endif


#if ! defined (__QUEX_SETTING_PLAIN_C)
namespace quex {
#endif

    typedef struct {
        QuexConverter  base;

        UConverter*  from_handle;
        UConverter*  to_handle;
        UErrorCode   status;

        UChar        pivot_buffer[QUEX_SETTING_ICU_PIVOT_BUFFER_SIZE];
        UChar*       pivot_iterator_begin;
        UChar*       pivot_iterator_end;

    } QuexConverter_ICU;

    QUEX_INLINE QuexConverter* QuexConverter_ICU_new();

#if ! defined (__QUEX_SETTING_PLAIN_C)
}
#endif

#endif /* __INCLUDE_GUARD__QUEX_BUFFER_CONVERTER_ICU__ */
